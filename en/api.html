<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/aws-samples/easy-model-deployer/api.html" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>API Reference - Easy Model Deployer</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="css/print-site-enum-headings1.css" rel="stylesheet" />
        <link href="css/print-site-enum-headings2.css" rel="stylesheet" />
        <link href="css/print-site-enum-headings3.css" rel="stylesheet" />
        <link href="css/print-site-enum-headings4.css" rel="stylesheet" />
        <link href="css/print-site-enum-headings5.css" rel="stylesheet" />
        <link href="css/print-site-enum-headings6.css" rel="stylesheet" />
        <link href="css/print-site.css" rel="stylesheet" />
        <link href="css/print-site-readthedocs.css" rel="stylesheet" />
        <link href="custom.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API Reference";
        var mkdocs_page_input_path = "api.md";
        var mkdocs_page_url = "/aws-samples/easy-model-deployer/api.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Easy Model Deployer
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="installation.html">Quick Start</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="model-generator.html">Supported Models</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="best_deployment_practices.html">Best Deployment Practices</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="commands.html">CLI Commands</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">API Reference</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#list-models">List Models</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#chat-completions">Chat Completions</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#embeddings">Embeddings</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rerank">Rerank</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#invocations">Invocations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#vision-models">Vision Models</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#audio-transcription">Audio Transcription</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="sdk_api.html">SDK API</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="local_deployment.html">Local Deployment</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="sdk_integration.html">LangChain Integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="swift_chat_integration.html">SwiftChat Integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="dify_integration.html">Dify Integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="langflow_integration.html">LangFlow Integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="flowise_integration.html">Flowise Integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="ollama_integration.html">Ollama Integration</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="nextchat_integration.html">NextChat Integration</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Easy Model Deployer</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">API Reference</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/aws-samples/easy-model-deployer/edit/master/docs/api.md">Edit on aws-samples/easy-model-deployer</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api-documentation">API Documentation</h1>
<blockquote>
<p><strong>Getting Started</strong>: To obtain the base URL and API key for your deployed models, run <code>emd status</code> in your terminal. The command will display a table with your deployed models and their details, including a link to retrieve the API key from AWS Secrets Manager. The base URL is shown at the bottom of the output.</p>
<p>Example output:
<div class="language-text highlight"><pre><span></span><code><span id="__span-0-1">Models
</span><span id="__span-0-2">┌────────────────────────┬───────────────────────────────────────────────────────────────────────┐
</span><span id="__span-0-3">│ Model ID               │ Qwen2.5-0.5B-Instruct/dev                                             │
</span><span id="__span-0-4">│ Status                 │ CREATE_COMPLETE                                                       │
</span><span id="__span-0-5">│ Service Type           │ Amazon SageMaker AI Real-time inference with OpenAI Compatible API    │
</span><span id="__span-0-6">│ Instance Type          │ ml.g5.2xlarge                                                         │
</span><span id="__span-0-7">│ Create Time            │ 2025-05-08 12:27:05 UTC                                               │
</span><span id="__span-0-8">│ Query Model API Key    │ https://console.aws.amazon.com/secretsmanager/secret?name=EMD-APIKey- │
</span><span id="__span-0-9">│                        │ Secrets&amp;region=us-east-1                                              │
</span><span id="__span-0-10">│ SageMakerEndpointName  │ EMD-Model-qwen2-5-0-5b-instruct-endpoint                              │
</span><span id="__span-0-11">└────────────────────────┴───────────────────────────────────────────────────────────────────────┘
</span><span id="__span-0-12">
</span><span id="__span-0-13">Base URL
</span><span id="__span-0-14">http://your-emd-endpoint.region.elb.amazonaws.com/v1
</span></code></pre></div></p>
</blockquote>
<h2 id="list-models">List Models</h2>
<p>Returns a list of available models.</p>
<p><strong>Endpoint:</strong> <code>GET /v1/models</code></p>
<p><strong>Curl Example:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1">curl<span class="w"> </span>https://BASE_URL/v1/models
</span></code></pre></div></p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-2-2">
</span><span id="__span-2-3"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-2-4">    <span class="c1"># No API key needed for listing models</span>
</span><span id="__span-2-5">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-2-6"><span class="p">)</span>
</span><span id="__span-2-7">
</span><span id="__span-2-8"><span class="c1"># List available models</span>
</span><span id="__span-2-9"><span class="n">models</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
</span><span id="__span-2-10"><span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
</span><span id="__span-2-11">    <span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="chat-completions">Chat Completions</h2>
<p>Create a model response for a conversation.</p>
<p><strong>Endpoint:</strong> <code>POST /v1/chat/completions</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>model</code> (required): ID of the model to use (e.g., "Qwen2.5-7B-Instruct/dev", "Llama-3.3-70B-Instruct/dev")</li>
<li><code>messages</code> (required): Array of message objects with <code>role</code> and <code>content</code></li>
<li><code>temperature</code>: Sampling temperature (0-2, default: 1)</li>
<li><code>top_p</code>: Nucleus sampling parameter (0-1, default: 1)</li>
<li><code>n</code>: Number of chat completion choices to generate (default: 1)</li>
<li><code>stream</code>: Whether to stream partial progress (default: false)</li>
<li><code>stop</code>: Sequences where the API will stop generating</li>
<li><code>max_tokens</code>: Maximum number of tokens to generate</li>
<li><code>presence_penalty</code>: Penalty for new tokens based on presence (-2.0 to 2.0)</li>
<li><code>frequency_penalty</code>: Penalty for new tokens based on frequency (-2.0 to 2.0)</li>
<li><code>function_call</code>: Controls how the model responds to function calls</li>
<li><code>functions</code>: List of functions the model may generate JSON inputs for</li>
</ul>
<p><strong>Curl Example:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1">curl<span class="w"> </span>https://BASE_URL/v1/chat/completions<span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-2"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer YOUR_API_KEY&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-3"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-3-4"><span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
</span><span id="__span-3-5"><span class="s1">    &quot;model&quot;: &quot;Qwen2.5-7B-Instruct/dev&quot;,</span>
</span><span id="__span-3-6"><span class="s1">    &quot;messages&quot;: [</span>
</span><span id="__span-3-7"><span class="s1">      {&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;},</span>
</span><span id="__span-3-8"><span class="s1">      {&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello!&quot;}</span>
</span><span id="__span-3-9"><span class="s1">    ],</span>
</span><span id="__span-3-10"><span class="s1">    &quot;temperature&quot;: 0.7</span>
</span><span id="__span-3-11"><span class="s1">  }&#39;</span>
</span></code></pre></div></p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-4-2">
</span><span id="__span-4-3"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-4-4">    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-4-5">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-4-6"><span class="p">)</span>
</span><span id="__span-4-7">
</span><span id="__span-4-8"><span class="c1"># Create a chat completion</span>
</span><span id="__span-4-9"><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-4-10">    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;Qwen2.5-7B-Instruct/dev&quot;</span><span class="p">,</span>  <span class="c1"># Model ID with tag</span>
</span><span id="__span-4-11">    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-4-12">        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
</span><span id="__span-4-13">        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello!&quot;</span><span class="p">}</span>
</span><span id="__span-4-14">    <span class="p">],</span>
</span><span id="__span-4-15">    <span class="n">temperature</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
</span><span id="__span-4-16">    <span class="n">stream</span><span class="o">=</span><span class="kc">False</span>
</span><span id="__span-4-17"><span class="p">)</span>
</span><span id="__span-4-18">
</span><span id="__span-4-19"><span class="c1"># Print the response</span>
</span><span id="__span-4-20"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span></code></pre></div></p>
<p><strong>Streaming Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-5-2">
</span><span id="__span-5-3"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-5-4">    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-5-5">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-5-6"><span class="p">)</span>
</span><span id="__span-5-7">
</span><span id="__span-5-8"><span class="c1"># Create a streaming chat completion</span>
</span><span id="__span-5-9"><span class="n">stream</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-5-10">    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;Llama-3.3-70B-Instruct/dev&quot;</span><span class="p">,</span>  <span class="c1"># Model ID with tag</span>
</span><span id="__span-5-11">    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-5-12">        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
</span><span id="__span-5-13">        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Write a short poem about AI.&quot;</span><span class="p">}</span>
</span><span id="__span-5-14">    <span class="p">],</span>
</span><span id="__span-5-15">    <span class="n">stream</span><span class="o">=</span><span class="kc">True</span>
</span><span id="__span-5-16"><span class="p">)</span>
</span><span id="__span-5-17">
</span><span id="__span-5-18"><span class="c1"># Process the stream</span>
</span><span id="__span-5-19"><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
</span><span id="__span-5-20">    <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">content</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-5-21">        <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span id="__span-5-22"><span class="nb">print</span><span class="p">()</span>
</span></code></pre></div></p>
<h2 id="embeddings">Embeddings</h2>
<blockquote>
<p>Some embedding models may have additional parameters or usage guidelines specified in their official documentation. For model-specific details, please refer to the provider's documentation.</p>
</blockquote>
<p>Get vector representations of text.</p>
<p><strong>Endpoint:</strong> <code>POST /v1/embeddings</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>model</code> (required): ID of the model to use (e.g., "bge-m3/dev")</li>
<li><code>input</code> (required): Input text to embed or array of texts</li>
<li><code>user</code>: A unique identifier for the end-user</li>
</ul>
<p><strong>Curl Example:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1">curl<span class="w"> </span>https://BASE_URL/v1/embeddings<span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-2"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer YOUR_API_KEY&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-3"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-6-4"><span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
</span><span id="__span-6-5"><span class="s1">    &quot;model&quot;: &quot;bge-m3/dev&quot;,</span>
</span><span id="__span-6-6"><span class="s1">    &quot;input&quot;: &quot;The food was delicious and the waiter...&quot;</span>
</span><span id="__span-6-7"><span class="s1">  }&#39;</span>
</span></code></pre></div></p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-7-2">
</span><span id="__span-7-3"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-7-4">    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-7-5">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-7-6"><span class="p">)</span>
</span><span id="__span-7-7">
</span><span id="__span-7-8"><span class="c1"># Get embeddings for a single text</span>
</span><span id="__span-7-9"><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">embeddings</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-7-10">    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;bge-m3/dev&quot;</span><span class="p">,</span>  <span class="c1"># Embedding model ID with tag</span>
</span><span id="__span-7-11">    <span class="nb">input</span><span class="o">=</span><span class="s2">&quot;The food was delicious and the service was excellent.&quot;</span>
</span><span id="__span-7-12"><span class="p">)</span>
</span><span id="__span-7-13">
</span><span id="__span-7-14"><span class="c1"># Print the embedding vector</span>
</span><span id="__span-7-15"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">embedding</span><span class="p">)</span>
</span><span id="__span-7-16">
</span><span id="__span-7-17"><span class="c1"># Get embeddings for multiple texts</span>
</span><span id="__span-7-18"><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">embeddings</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-7-19">    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;bge-m3/dev&quot;</span><span class="p">,</span>  <span class="c1"># Embedding model ID with tag</span>
</span><span id="__span-7-20">    <span class="nb">input</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-7-21">        <span class="s2">&quot;The food was delicious and the service was excellent.&quot;</span><span class="p">,</span>
</span><span id="__span-7-22">        <span class="s2">&quot;The restaurant was very expensive and the food was mediocre.&quot;</span>
</span><span id="__span-7-23">    <span class="p">]</span>
</span><span id="__span-7-24"><span class="p">)</span>
</span><span id="__span-7-25">
</span><span id="__span-7-26"><span class="c1"># Print the number of embeddings</span>
</span><span id="__span-7-27"><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Generated </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2"> embeddings&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="rerank">Rerank</h2>
<blockquote>
<p>Some reranking models may have additional parameters or usage guidelines specified in their official documentation. For model-specific details, please refer to the provider's documentation.</p>
</blockquote>
<p>Rerank a list of documents based on their relevance to a query.</p>
<p><strong>Endpoint:</strong> <code>POST /v1/rerank</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>model</code> (required): ID of the model to use (e.g., "bge-reranker-v2-m3/dev")</li>
<li><code>query</code> (required): The search query</li>
<li><code>documents</code> (required): List of documents to rerank</li>
<li><code>max_rerank</code>: Maximum number of documents to rerank (default: all)</li>
<li><code>return_metadata</code>: Whether to return metadata (default: false)</li>
</ul>
<p><strong>Curl Example:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1">curl<span class="w"> </span>https://BASE_URL/v1/rerank<span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-2"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer YOUR_API_KEY&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-3"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-8-4"><span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
</span><span id="__span-8-5"><span class="s1">    &quot;model&quot;: &quot;bge-reranker-v2-m3/dev&quot;,</span>
</span><span id="__span-8-6"><span class="s1">    &quot;query&quot;: &quot;What is the capital of France?&quot;,</span>
</span><span id="__span-8-7"><span class="s1">    &quot;documents&quot;: [</span>
</span><span id="__span-8-8"><span class="s1">      &quot;Paris is the capital of France.&quot;,</span>
</span><span id="__span-8-9"><span class="s1">      &quot;Berlin is the capital of Germany.&quot;,</span>
</span><span id="__span-8-10"><span class="s1">      &quot;London is the capital of England.&quot;</span>
</span><span id="__span-8-11"><span class="s1">    ]</span>
</span><span id="__span-8-12"><span class="s1">  }&#39;</span>
</span></code></pre></div></p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-9-2">
</span><span id="__span-9-3"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-9-4">    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-9-5">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-9-6"><span class="p">)</span>
</span><span id="__span-9-7">
</span><span id="__span-9-8"><span class="c1"># Rerank documents based on a query</span>
</span><span id="__span-9-9"><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">reranking</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-9-10">    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;bge-reranker-v2-m3/dev&quot;</span><span class="p">,</span>  <span class="c1"># Reranking model ID with tag</span>
</span><span id="__span-9-11">    <span class="n">query</span><span class="o">=</span><span class="s2">&quot;What is the capital of France?&quot;</span><span class="p">,</span>
</span><span id="__span-9-12">    <span class="n">documents</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-9-13">        <span class="s2">&quot;Paris is the capital of France.&quot;</span><span class="p">,</span>
</span><span id="__span-9-14">        <span class="s2">&quot;Berlin is the capital of Germany.&quot;</span><span class="p">,</span>
</span><span id="__span-9-15">        <span class="s2">&quot;London is the capital of England.&quot;</span>
</span><span id="__span-9-16">    <span class="p">],</span>
</span><span id="__span-9-17">    <span class="n">max_rerank</span><span class="o">=</span><span class="mi">3</span>
</span><span id="__span-9-18"><span class="p">)</span>
</span><span id="__span-9-19">
</span><span id="__span-9-20"><span class="c1"># Print the reranked documents</span>
</span><span id="__span-9-21"><span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
</span><span id="__span-9-22">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Document: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">document</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-23">    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Relevance Score: </span><span class="si">{</span><span class="n">result</span><span class="o">.</span><span class="n">relevance_score</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</span><span id="__span-9-24">    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---&quot;</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="invocations">Invocations</h2>
<p>General-purpose endpoint for model invocations.</p>
<p><strong>Endpoint:</strong> <code>POST /v1/invocations</code></p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>model</code> (required): ID of the model to use</li>
<li><code>input</code>: Input data for the model</li>
<li><code>parameters</code>: Additional parameters for the model</li>
</ul>
<p><strong>Curl Example:</strong>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1">curl<span class="w"> </span>https://BASE_URL/v1/invocations<span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-2"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer YOUR_API_KEY&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-3"><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: application/json&quot;</span><span class="w"> </span><span class="se">\</span>
</span><span id="__span-10-4"><span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
</span><span id="__span-10-5"><span class="s1">    &quot;model&quot;: &quot;Qwen2.5-7B-Instruct/dev&quot;,</span>
</span><span id="__span-10-6"><span class="s1">    &quot;input&quot;: {</span>
</span><span id="__span-10-7"><span class="s1">      &quot;query&quot;: &quot;What is machine learning?&quot;</span>
</span><span id="__span-10-8"><span class="s1">    },</span>
</span><span id="__span-10-9"><span class="s1">    &quot;parameters&quot;: {</span>
</span><span id="__span-10-10"><span class="s1">      &quot;max_tokens&quot;: 100</span>
</span><span id="__span-10-11"><span class="s1">    }</span>
</span><span id="__span-10-12"><span class="s1">  }&#39;</span>
</span></code></pre></div></p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-11-1"><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>
</span><span id="__span-11-2"><span class="kn">import</span><span class="w"> </span><span class="nn">json</span>
</span><span id="__span-11-3">
</span><span id="__span-11-4"><span class="c1"># Set up the API endpoint and headers</span>
</span><span id="__span-11-5"><span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://BASE_URL/v1/invocations&quot;</span>
</span><span id="__span-11-6"><span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-7">    <span class="s2">&quot;Authorization&quot;</span><span class="p">:</span> <span class="s2">&quot;Bearer YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-11-8">    <span class="s2">&quot;Content-Type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span>
</span><span id="__span-11-9"><span class="p">}</span>
</span><span id="__span-11-10">
</span><span id="__span-11-11"><span class="c1"># Prepare the payload</span>
</span><span id="__span-11-12"><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-13">    <span class="s2">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;Qwen2.5-7B-Instruct/dev&quot;</span><span class="p">,</span>  <span class="c1"># Model ID with tag</span>
</span><span id="__span-11-14">    <span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-11-15">        <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="s2">&quot;What is machine learning?&quot;</span>
</span><span id="__span-11-16">    <span class="p">},</span>
</span><span id="__span-11-17">    <span class="s2">&quot;parameters&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-11-18">        <span class="s2">&quot;max_tokens&quot;</span><span class="p">:</span> <span class="mi">100</span>
</span><span id="__span-11-19">    <span class="p">}</span>
</span><span id="__span-11-20"><span class="p">}</span>
</span><span id="__span-11-21">
</span><span id="__span-11-22"><span class="c1"># Make the API call</span>
</span><span id="__span-11-23"><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">payload</span><span class="p">))</span>
</span><span id="__span-11-24">
</span><span id="__span-11-25"><span class="c1"># Print the response</span>
</span><span id="__span-11-26"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">())</span>
</span></code></pre></div></p>
<h2 id="vision-models">Vision Models</h2>
<p>Process images along with text prompts.</p>
<p><strong>Endpoint:</strong> <code>POST /v1/chat/completions</code></p>
<p><strong>Parameters:</strong>
Same as Chat Completions, but with messages that include image content.</p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-12-2"><span class="kn">import</span><span class="w"> </span><span class="nn">base64</span>
</span><span id="__span-12-3">
</span><span id="__span-12-4"><span class="c1"># Function to encode the image</span>
</span><span id="__span-12-5"><span class="k">def</span><span class="w"> </span><span class="nf">encode_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">):</span>
</span><span id="__span-12-6">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">image_file</span><span class="p">:</span>
</span><span id="__span-12-7">        <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">image_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span><span id="__span-12-8">
</span><span id="__span-12-9"><span class="c1"># Path to your image</span>
</span><span id="__span-12-10"><span class="n">image_path</span> <span class="o">=</span> <span class="s2">&quot;path/to/your/image.jpg&quot;</span>
</span><span id="__span-12-11"><span class="n">base64_image</span> <span class="o">=</span> <span class="n">encode_image</span><span class="p">(</span><span class="n">image_path</span><span class="p">)</span>
</span><span id="__span-12-12">
</span><span id="__span-12-13"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-12-14">    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-12-15">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-12-16"><span class="p">)</span>
</span><span id="__span-12-17">
</span><span id="__span-12-18"><span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-12-19">    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;Qwen2-VL-7B-Instruct/dev&quot;</span><span class="p">,</span>  <span class="c1"># Vision model ID with tag</span>
</span><span id="__span-12-20">    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-12-21">        <span class="p">{</span>
</span><span id="__span-12-22">            <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span>
</span><span id="__span-12-23">            <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span id="__span-12-24">                <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;What&#39;s in this image?&quot;</span><span class="p">},</span>
</span><span id="__span-12-25">                <span class="p">{</span>
</span><span id="__span-12-26">                    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;image_url&quot;</span><span class="p">,</span>
</span><span id="__span-12-27">                    <span class="s2">&quot;image_url&quot;</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-12-28">                        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;data:image/jpeg;base64,</span><span class="si">{</span><span class="n">base64_image</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span id="__span-12-29">                    <span class="p">}</span>
</span><span id="__span-12-30">                <span class="p">}</span>
</span><span id="__span-12-31">            <span class="p">]</span>
</span><span id="__span-12-32">        <span class="p">}</span>
</span><span id="__span-12-33">    <span class="p">]</span>
</span><span id="__span-12-34"><span class="p">)</span>
</span><span id="__span-12-35">
</span><span id="__span-12-36"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</span></code></pre></div></p>
<h2 id="audio-transcription">Audio Transcription</h2>
<p>Transcribe audio files to text.</p>
<p><strong>Endpoint:</strong> <code>POST /v1/audio/transcriptions</code></p>
<p><strong>Python Example:</strong>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</span><span id="__span-13-2">
</span><span id="__span-13-3"><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
</span><span id="__span-13-4">    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;YOUR_API_KEY&quot;</span><span class="p">,</span>
</span><span id="__span-13-5">    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://BASE_URL&quot;</span>
</span><span id="__span-13-6"><span class="p">)</span>
</span><span id="__span-13-7">
</span><span id="__span-13-8"><span class="n">audio_file_path</span> <span class="o">=</span> <span class="s2">&quot;path/to/audio.mp3&quot;</span>
</span><span id="__span-13-9"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">audio_file_path</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">audio_file</span><span class="p">:</span>
</span><span id="__span-13-10">    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">audio</span><span class="o">.</span><span class="n">transcriptions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
</span><span id="__span-13-11">        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;whisper-large-v3/dev&quot;</span><span class="p">,</span>  <span class="c1"># ASR model ID with tag</span>
</span><span id="__span-13-12">        <span class="n">file</span><span class="o">=</span><span class="n">audio_file</span>
</span><span id="__span-13-13">    <span class="p">)</span>
</span><span id="__span-13-14">
</span><span id="__span-13-15"><span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>  <span class="c1"># Transcribed text</span>
</span></code></pre></div></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="commands.html" class="btn btn-neutral float-left" title="CLI Commands"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="sdk_api.html" class="btn btn-neutral float-right" title="SDK API">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/aws-samples/easy-model-deployer/" class="fa fa-code-fork" style="color: #fcfcfc"> aws-samples/easy-model-deployer</a>
        </span>
    
    
      <span><a href="commands.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="sdk_api.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="js/print-site.js"></script>
      <script src="copy-button.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
